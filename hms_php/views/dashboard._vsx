<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Honorarium Management System</title>
    <link rel="stylesheet" href="css/styles.css">
    <script type="text/javascript" src="js/script.js"></script>
    <link rel="icon" type="image/png" sizes="32x32" href="fav.png">
</head>
<body>
  <div class="dashboard box">
      <div class="dashboard-header">
        <div class="right">
            <img src="img/biam.png" width="55px" height="auto">
        </div>
        <div>
            <p class="header-text">Honorarium Management System v1.0</p>
            <sub>User: {{ user_info }}</sub>
        </div>
        <div class="left">
          <a href="/dashboard" class="button">Home &#9732;</a>
          <a href="/logout" class="button bg-brown">Logout &#9732;</a>
        </div>
      </div>

      <div class="content">
        {% if user_info == 'admin' %}
          <p><strong>01. Create User</strong></p>
          <hr>
          <form action="/create" method="get">
              <input type="text" name="email" placeholder="Enter email address" required>
              <input type="password" name="password" placeholder="Enter Password" required>
              <input type="submit" value="&plus; Create" class="button">
          </form>
          <hr>
          <p><strong>02. List Of Active Users</strong></p>
          <hr>
          <ul>
            {% for user in admin_users %}
                <li>
                    <a class="button bg-brown" href="/delete?delete={{ user.email }}">&#9850;</a> Username: <strong>{{ user.email }}</strong>
                </li>
            {% else %}
                <li>No users found.</li>
            {% endfor %}
          </ul>
          <hr>
          <p><strong>03. Speaker Registration Form</strong></p>
          <hr>
          <form method="get" action="/dashboard">
              <input type="text" name="sid" placeholder="Speaker ID (4 digits)" pattern="^\d{4}$" maxlength="4" required>
              <input type="text" name="name" placeholder="Full Name" required>
              <input type="text" name="designation" placeholder="Designation" required>
              <input type="text" name="office" placeholder="Office/Institute" required>
              <input type="text" name="hpr" placeholder="Honorarium Per Hour" pattern="^\d{1,4}$" required oninput="this.value = this.value.replace(/\D/g, '')">
              <input type="submit" value="&plus; Add Speaker" class="button">
          </form>
          <hr>
          <p><strong>04. Registered Speaker</strong></p>
          <hr>
          <table class="speakers">
              <tr>
                 <th>Speaker ID</th> 
                 <th>Name</th>
                 <th>Designation</th>
                 <th>Institute/Office</th>
                 <th>Honorarium Per Hour (HPH)</th>
                 <th>Actions</th> 
              </tr>
              {% for speaker in speakers %}
                <tr>
                   <td>{{ speaker.sid }}</td> 
                   <td>{{ speaker.name }}</td>
                   <td>{{ speaker.designation }}</td>
                   <td>{{ speaker.office }}</td>
                   <td>{{ speaker.hpr | number_format(0, ',', ',') }} BDT</td>
                   <td><a class="button bg-brown" href="/dashboard?remove={{ speaker.sid }}">DELETE &#9850;</a></td> 
                </tr>
              {% else %}
                <tr><td colspan="6">No speakers found.</td></tr>
              {% endfor %}
          </table>
        {% else %}
          <p><strong>01. Track a New Course</strong></p>
          <hr>
          <form action="/dashboard" method="get">
              <input type="text" name="new_course" placeholder="Course Description(E.G 14th DFTC of PGCB from 10 OCT 24 to 16 DEC 24)" required>
              <input type="submit" value="&plus; Create" class="button">
          </form>
          <hr>
          <p><strong>02. Your Course List</strong>  <button id="btnRemove" class="button btnRemove bg-brown">Remove Course</button></p>
          <hr>
          <table class="course-list">
              <tr>
                 <th class="hide del"></th>
                 <th>Tracking ID</th>
                 <th>Description</th>
                 <th>Created</th>
                 <th>Honorarium</th>
               
               
              </tr>
              {% for course in courseList %}
                <tr>
                   <td class="hide del"><a href="/dashboard?courseDelete={{course.tracking_id}}" class="button bg-brown">&times;</a></td>
                   <td><strong>{{ course.tracking_id }}</strong></td>
                   <td>{{ course.description }}</td>
                     <td>{{ course.started | date("d/m/Y")  }}</td>
                   <td><a href="/honorarium?id={{course.tracking_id}}&desc={{course.description}}" class="button">&plus; View</a></td>
                 
                   
                </tr>
              {% else %}
                <tr><td colspan="3">No courses found.</td></tr>
              {% endfor %}
          </table>
        {% endif %}
      </div>
  </div>
</body>
</html>
